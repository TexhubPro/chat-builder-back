Options -Indexes

<IfModule mod_rewrite.c>
    RewriteEngine On

    # Keep ACME challenge reachable for TLS issuance.
    RewriteRule ^\.well-known/ - [L]

    # Block direct access to sensitive project files when backend root is public.
    RewriteRule ^(\.env|artisan|composer\.(json|lock)|package(-lock)?\.json|phpunit\.xml)$ - [F,L,NC]
    RewriteRule ^(app|bootstrap|config|database|resources|routes|storage|tests|vendor)/ - [F,L,NC]

    # If Apache document root points to /back instead of /back/public,
    # internally route all requests into /public.
    RewriteCond %{REQUEST_URI} !^/public/
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule>
